---
layout: post
title: He escrito un intérprete de Brainfuck en Lua
date: '2020-01-26T07:10:00.002-06:00'
author: Deybis A. Melendez Vargas
tag: programación
modified_time: '2020-02-06T09:22:41.418-06:00'
thumbnail: https://1.bp.blogspot.com/-bc7O1C-wvv8/Xi2PsBTMeyI/AAAAAAAABmM/yLSmrI6Zer4-oGmI0ZUea8puVlgUa1irQCLcBGAsYHQ/s72-c/brainfuck.png
blogger_id: tag:blogger.com,1999:blog-5503112308634825503.post-7999150899031219283
blogger_orig_url: https://www.deybismelendez.com/2020/01/interprete-brainfuck-lua.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-bc7O1C-wvv8/Xi2PsBTMeyI/AAAAAAAABmM/yLSmrI6Zer4-oGmI0ZUea8puVlgUa1irQCLcBGAsYHQ/s1600/brainfuck.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="351" data-original-width="640" height="350" src="https://1.bp.blogspot.com/-bc7O1C-wvv8/Xi2PsBTMeyI/AAAAAAAABmM/yLSmrI6Zer4-oGmI0ZUea8puVlgUa1irQCLcBGAsYHQ/s640/brainfuck.png" width="640" /></a></div><br />Brainfuck es un lenguaje de programación esotérico (Esolang) muy simple, tanto que se puede crear intérpretes desde cualquier lenguaje de programación moderno, hasta en Lua. También es considerado un <a href="https://es.wikipedia.org/wiki/Turing_completo" target="_blank">Turing Completo</a>.<br /><br />Si ya viste la película <a href="https://es.wikipedia.org/wiki/The_Imitation_Game" target="_blank">The Imitation Game</a> (recomendadísima por cierto) entonces sabes a lo que me refiero con Máquina de Turing, pero en resumen, una máquina de Turing es una máquina automática que puede leer y escribir simbolos en una cinta y cambiar su comportamiento dependiendo de su estado.<br /><h2>Como funciona brainfuck</h2><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/M%C3%A1quina_de_Turing.png/250px-M%C3%A1quina_de_Turing.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="82" data-original-width="250" height="104" src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/M%C3%A1quina_de_Turing.png/250px-M%C3%A1quina_de_Turing.png" width="320" /></a></div><br /><br />La idea de Brainfuck es imitar a la máquina de Turing así que con ella tenemos "una cinta" de memoria para trabajar, es mas bien un array de bytes, a cada item del array lo llamaremos celda. Aunque según el creador del lenguaje su límite debería ser 30, 000 bytes (celdas) esto solo es hipotético, en el caso de mi intérprete no he dejado un límite.<br /><br />Digamos que las celdas representan la memoria RAM de esta máquina, a cada celda le asignamos un número entero, inicialmente cero, el equivalente a nulo o inexistente, cada celda puede asignarse hasta el número 255, ya que 256 es el número máximo de valores que podemos almacenar en un byte, aunque vuelvo a repetir, ésto es hipotético, queda en el programador respetar o no ésto, aunque según el intérprete podría estar restringido o no también.<br /><br />Entonces Brainfuck tiene 8 instrucciones nada mas:<br /><br />&lt; Mueve el cabezal hacia la izquierda.<br />&gt; Mueve el cabezal hacia la derecha.<br />+ Aumenta el byte hacia donde apunta el cabezal (suma 1)<br />- Disminuye el byte hacia donde apunta el cabezal (resta 1)<br />. Imprime el byte apuntado por el cabezal (normalmente en forma de caracter ascii)<br />, Lee un byte del usuario y lo almacena en la celda donde apunta el cabezal.<br />[ Inicio de un bucle infinito.<br />] Cierre del bucle, si el byte apuntado es cero continúa si no regresa al inicio del bucle.<br /><br />Esto es suficiente para crear programas, desde el hola mundo hasta el juego de la vida y mas...<br /><h2>Como usar brainfuck.lua</h2><br /><pre><code>++++++++++[&gt;+++++++&gt;++++++++++&gt;+++&gt;+&lt;&lt;&lt;<->++.&gt;+.+++++++..+++.&gt;++.&lt;&lt;+++++++++++++++.&gt;.+++.------.--------.&gt;+.&gt;.</-></code></pre>Este es el código fuente para imprimir el Hello World! en Brainfuck.<br /><br />Puedes copiar el texto y guardarlo en un archivo de texto con extensión *.b o *.bf.<br /><br />Para usar mi intérprete debes descargarlo de mi repositorio <a href="https://github.com/DeybisMelendez/brainfuck.lua" target="_blank">aquí</a>.<br /><br />Debes tener <a href="https://www.lua.org/" target="_blank">Lua 5.3</a> o superior instalado. Si tienes una versión anterior debes realizar un cambio que en el código está anotado como comentario.<br /><br />Ejecutamos lo siguiente:<br /><br /><pre><code>lua brainfuck.lua codigo-brainfuck.bf</code></pre><br />Donde codigo-brainfuck.bf es sustituido por el nombre de tu archivo, debes tener el archivo brainfuck.lua en la misma carpeta de tu código brainfuck.<br /><h2></h2><h2>Como programar en brainfuck</h2><br />Aunque explique la sintaxis sigue siendo complicado comprender la forma de programar en brainfuck, claro por algo se llama "jode cerebros", pero en realidad no es nada mas una forma "muy friki" de programar.<br /><h3>Variables</h3><br />No hay variables como tal, pero podemos imaginar que cada celda es una variable, si deseamos que la celda 0 tenga el valor 4, entonces solo tenemos que escribir ++++, ya que éste aumenta el byte 4 veces, y al imprimir (.) el byte se convierte en un caracter ascii, por lo que es importante tener en cuenta la tabla ascii también para "almancenar caracteres".<br /><br />Ejemplo:<br /><pre><code>&gt;+&gt;++&gt;+++&nbsp;</code></pre>Ahí lo que tenemos son 3 bytes en las celdas 1, 2, 3. con valor 1, 2, 3 respectivamente.<br /><h3>Bucle While</h3><br />El bucle While se representa con los simbolos [] que al final del bucle si el byte donde está ubicado el cabezal vale 0 entonces rompe el bucle y continúa a la siguiente instrucción, pero es importante que lo que vale para romper el bucle es el byte que apunta en el momento del cierre por lo que podemos utilizar ese byte de muchas maneras.<br /><br />Ejemplo: <br /><pre><code>+[]</code></pre>Este ejemplo crea un bucle infinito, ya que al inicio sumamos al byte apuntado, por lo que daría uno pero nunca convertimos ese byte a 0.<br /><br /><h3>For</h3><br />No hay un ciclo for, pero podemos apañarlas con el bucle While con la siguiente estructura:<br /><br />Escribimos en un byte la cantidad de repeticiones que deseamos realizar.<br />Escribimos el código que deseamos en el bucle.<br />Al final del bucle apuntamos al byte de las repeticiones y restamos.<br /><br />Ejemplo:<br /><br /><pre><code>++++++++++[&gt;++++++++++&lt;-]</code></pre>Preparamos la celda 0 para tener valor de 10, luego en el bucle apuntamos a la celda 1, sumamos 10 y luego regresamos a la celda 0 y le restamos 1. Esto hace que la celda 1 sume 10, 10 veces, es decir, que adquiera el valor 100.<br /><h2>Ejemplo de programa en brainfuck </h2><br />El siguiente ejemplo, es un código que escribí que imprime los números del 0 al 9:<br /><br /><pre><code>++++++++++&gt; almacenamos en la celda 0 el valor 10 (salto de linea)<br /><br />++++[&gt;++++++++++&lt;-] en la celda 1 la sumamos hasta 4 luego en la celda 2 sumamos 10 veces restamos uno y el puntero regresa a la celda 1 como la celda vale 4 el bucle se repetira 4 veces<br /><br />&gt;++++++++. en la celda 2 sumamos 8 para llegar a 48 (caracter 0) e imprimimos<br />&lt;+++++++++ nos devolvemos a la celda 1 y le asignamos el valor 9 para imprimir los demas numeros<br />[&lt;.&gt;&gt;+.&lt;-] nos vamos a la celda cero e imprimimos luego a la celda 2 sumamos 1 e imprimimos;<br />nos devolvemos a la celda 1 y restamos<br />&lt;. imprimimos por ultima vez el salto de linea<br />Con esto el programa imprime los numeros del 0 al 9<br /></code></pre><br />Con esto ya tendrías todo lo necesario para practicar un poco.<br /><br />Ahora te dejo una tarea, <b>¿Puedes escribir el código brainfuck para que imprima tu nombre?</b><br /><br />Si lo logras, déjamelo en los comentarios!<br /><h2>Guinxü lang</h2><br />Debido a que todo esto fue por un vídeo que publicó <a href="https://youtu.be/9980_28EfbA" target="_blank">Guinxu</a> sobre "lenguajes raros" me pareció curioso cambiar la sintaxis del brainfuck para crear el Guinxu lang, donde solo cambio los caracteres usados para las instrucciones con los caracteres de guinxu.<br /><br />En comparación, la sintaxis es la siguiente:<br /><br /><pre><code>&gt; = g<br />&lt; = u<br />+ = i<br />- = n<br />. = x<br />, = ü<br />[ = [<br />] = ] </code></pre><br />Aquí tienes el mismo ejemplo de los números en guinxu lang:<br /><br /><pre><code>iiiiiiiiiiu<br />iiii[uiiiiiiiiiign]<br />uiiiiiiiix<br />giiiiiiiii<br />[gxuuixgn]<br />gx<br /></code></pre><br /><br />Si te gustaría probar mi intérprete brainfuck o el intérprete de guinxu lang puedes descargar el repositorio <a href="https://github.com/DeybisMelendez/brainfuck.lua" target="_blank">aquí</a>.<br /><br /><b>Edit:</b> He modificado el guinxu lang por un "pequeñito" fallo de diseño, Guinxu lleva dos letras "u", por lo que he decidido cambiar la segunda "u" por "ü", por suerte, esto no afecta al código de ejemplo.